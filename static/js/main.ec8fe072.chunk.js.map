{"version":3,"sources":["api/api.js","utils/utils.js","components/Input.js","components/FilterPanel.js","components/Segment.js","components/Card.js","components/Main.js","components/App.js","index.js"],"names":["getFlights","Promise","resolve","flights","result","selectedFilters","filt","minPrice","maxPrice","transfer","vendors","selected","Object","keys","forEach","item","push","isSelected","filteredFlights","filters","filter","flight","price","total","amount","every","key","length","some","keyElem","carrier","uid","legs","segments","getFlightDate","string","mode","date","Date","toLocaleTimeString","match","join","getDate","toLocaleString","month","weekday","initialFilters","Input","props","className","labelLeft","type","id","name","value","checked","onChange","disabled","labelRight","memo","FilterPanel","transferLabel","vendorLabel","caption","sort","handleSort","map","ind","handleTransferChange","style","marginRight","handlePrice","handleVendorChange","Segment","min","arrivalCity","leg","arrivalAirport","arrivalDate","departureCity","departureAirport","departureDate","duration","Math","floor","airline","Card","src","alt","margin","height","background","Main","children","flex","padding","textAlign","fontSize","App","useState","Array","visibleFlights","setVisibleFlights","visibleCount","setVisibleCount","setFilters","setSort","useEffect","then","a","b","slice","reduce","res","curr","max","catch","err","alert","target","prevState","event","onClick","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ec8fe072.chunk.js","sourcesContent":["import flights from './flights.json';\r\n\r\nexport const getFlights = () => Promise.resolve(flights.result.flights)\r\n","export function selectedFilters(filt) {\r\n  const { minPrice, maxPrice, transfer, vendors } = filt;\r\n  const selected = { minPrice, maxPrice, transfer: [], vendors: [] };\r\n\r\n  Object.keys(transfer).forEach(item => transfer[item] && selected.transfer.push(item));\r\n  Object.keys(vendors).forEach(item => vendors[item].isSelected && selected.vendors.push(item));\r\n\r\n  return selected\r\n}\r\n\r\nexport function filteredFlights(flights, filters) {\r\n  return flights.filter(item => {\r\n    if (item.flight.price.total.amount < filters.minPrice\r\n      || item.flight.price.total.amount > filters.maxPrice) return false;\r\n\r\n    return Object.keys(filters).every(key => {\r\n      if (!filters[key].length) return true;\r\n\r\n      if (key === 'vendors') {\r\n        return filters[key].some(keyElem => item.flight.carrier.uid == keyElem);\r\n      }\r\n      if (key === 'transfer') {\r\n        return filters[key].some(keyElem => item.flight.legs[0].segments.length - 1 == keyElem)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport function getFlightDate(string, mode) {\r\n  const date = new Date(string);\r\n  return mode === 'time'\r\n    ? `${date.toLocaleTimeString().match(/\\d{2}:\\d{2}/).join()}`\r\n    : `${date.getDate()} ${date.toLocaleString('ru', {month: 'short'})} ${date.toLocaleString('ru', {weekday: 'short'})}`\r\n}\r\n\r\nexport const minToHours = min => min < 1440 ? `${Math.floor(min / 60)} ч ${min % 60} мин` : 'Очень долго';\r\n\r\nexport const initialFilters = {\r\n  minPrice: 1e6,\r\n  maxPrice: 0,\r\n  vendors: {},\r\n  transfer: {}\r\n}\r\n\r\nexport const visibleStep = 4;\r\n","import { memo } from \"react\"\r\n\r\nfunction Input(props) {\r\n  return (\r\n    <label className=\"form__label\">\r\n      {props.labelLeft}\r\n      <input\r\n        type={props.type}\r\n        id={props.id}\r\n        name={props.name}\r\n        value={props.value}\r\n        className=\"form__input\"\r\n        checked={props.checked}\r\n        onChange={props.onChange}\r\n        disabled={props.disabled}\r\n      />\r\n      {props.labelRight}\r\n    </label>\r\n  )\r\n}\r\n\r\nexport default memo(Input)\r\n","import { memo } from \"react\";\r\nimport Input from \"./Input\";\r\n\r\nfunction FilterPanel(props) {\r\n  const transferLabel = item => (\r\n    `${+item ? ` - ${item} пересадка` : ' - без пересадок'}`\r\n  )\r\n\r\n  const vendorLabel = item => (\r\n    <>\r\n      <span className=\"form__caption\">{`- ${props.filters.vendors[item].caption}`}</span>\r\n      <span className=\"form__price\">{`от ${props.filters.vendors[item].minPrice.toLocaleString('ru')} р.`}</span>\r\n    </>\r\n  )\r\n\r\n  return (\r\n    <section className=\"panel\">\r\n      <form className=\"form\">\r\n        <h2 className=\"form__title\">Сортировать</h2>\r\n        <fieldset className=\"form__input-container\">\r\n          <Input\r\n            type=\"radio\"\r\n            id=\"up\"\r\n            value={props.sort}\r\n            name=\"sort\"\r\n            labelRight=\" - по возрастанию цены\"\r\n            // checked={true}\r\n            onChange={props.handleSort}\r\n          />\r\n          <Input\r\n            type=\"radio\"\r\n            id=\"down\"\r\n            value={props.sort}\r\n            name=\"sort\"\r\n            labelRight=\" - по убыванию цены\"\r\n            onChange={props.handleSort}\r\n          />\r\n          <Input\r\n            type=\"radio\"\r\n            id=\"duration\"\r\n            value={props.sort}\r\n            name=\"sort\"\r\n            labelRight=\" - по времени в пути\"\r\n            onChange={props.handleSort}\r\n            disabled={true}\r\n          />\r\n        </fieldset>\r\n\r\n        <h2 className=\"form__title form__title_last\">Фильтровать</h2>\r\n        <fieldset className=\"form__input-container\">\r\n          <h3 className=\"form__subtitle\">Количество пересадок</h3>\r\n          {props.filters.transfer &&\r\n            Object.keys(props.filters.transfer).map((item, ind) => (\r\n              <Input\r\n                key={ind}\r\n                type=\"checkbox\"\r\n                labelRight={transferLabel(item)}\r\n                value={item}\r\n                checked={props.filters.transfer[item]}\r\n                onChange={props.handleTransferChange}\r\n              />\r\n            ))\r\n          }\r\n\r\n          <h3 className=\"form__subtitle\">Цена</h3>\r\n          <Input\r\n            type=\"number\"\r\n            name=\"minPrice\"\r\n            labelLeft={<span style={{ marginRight: 7 }}>От</span>}\r\n            value={props.filters.minPrice}\r\n            onChange={props.handlePrice}\r\n          />\r\n          <Input\r\n            type=\"number\"\r\n            name=\"maxPrice\"\r\n            labelLeft={<span style={{ marginRight: 7 }}>До</span>}\r\n            value={props.filters.maxPrice}\r\n            onChange={props.handlePrice}\r\n          />\r\n\r\n          <h3 className=\"form__subtitle\">Авиакомпании</h3>\r\n          {props.filters.vendors &&\r\n            Object.keys(props.filters.vendors).map((item, ind) => (\r\n              <Input\r\n                key={ind}\r\n                type=\"checkbox\"\r\n                labelRight={vendorLabel(item)}\r\n                value={item}\r\n                checked={props.filters.vendors[item].isSelected}\r\n                onChange={props.handleVendorChange}\r\n              />\r\n            ))\r\n          }\r\n        </fieldset>\r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default memo(FilterPanel)\r\n","import { memo } from \"react\";\r\nimport { getFlightDate, minToHours } from \"../utils/utils\";\r\n\r\nfunction Segment(props) {\r\n  const arrivalCity = props.leg.segments.length === 2\r\n    ? props.leg.segments[1].arrivalCity\r\n    : props.leg.segments[0].arrivalCity\r\n\r\n  const arrivalAirport = props.leg.segments.length === 2\r\n    ? props.leg.segments[1].arrivalAirport\r\n    : props.leg.segments[0].arrivalAirport\r\n\r\n  const arrivalDate = props.leg.segments.length === 2\r\n    ? props.leg.segments[1].arrivalDate\r\n    : props.leg.segments[0].arrivalDate\r\n\r\n  const transfer = props.leg.segments.length === 2 && `${props.leg.segments.length - 1} пересадка`\r\n\r\n  return (\r\n    <div className=\"card__segment\">\r\n      <div className=\"card__travel-places\">\r\n        <span>\r\n          {`${props.leg.segments[0].departureCity.caption}, ${props.leg.segments[0].departureAirport.caption}`}\r\n        </span>\r\n        <span className=\"card_color\">\r\n          {`(${props.leg.segments[0].departureAirport.uid}) →`}\r\n        </span>\r\n        <span>\r\n          {`${arrivalCity.caption}, ${arrivalAirport.caption}`}\r\n        </span>\r\n        <span className=\"card_color\">\r\n          {`(${arrivalAirport.uid})`}\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"card__travel-time\">\r\n        <span className=\"card__time\">{getFlightDate(props.leg.segments[0].departureDate, 'time')}</span>\r\n        <span className=\"card_color\">{getFlightDate(props.leg.segments[0].departureDate)}</span>\r\n        <div className=\"card__wrapper\">\r\n          <span className=\"card__duration\">{minToHours(props.leg.duration)}</span>\r\n        </div>\r\n        <span className=\"card_color\">{getFlightDate(arrivalDate)}</span>\r\n        <span className=\"card__time\">{getFlightDate(arrivalDate, 'time')}</span>\r\n      </div>\r\n      <div className=\"card__container\">\r\n        <span className=\"card__transfer\">{transfer}</span>\r\n      </div>\r\n      <footer className=\"card__footer\">{`Рейс выполняет: ${props.leg.segments[0].airline.caption}`}</footer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default memo(Segment);\r\n","import { memo } from \"react\";\r\nimport Segment from \"./Segment\";\r\n\r\nfunction Card(props) {\r\n  return (\r\n    <article className=\"card\">\r\n      <header className=\"card__header\">\r\n        <img src=\"\" alt={props.flight.flight.carrier.uid} className=\"card__logo\" />\r\n        <div>\r\n          <p className=\"card__price\">{`${props.flight.flight.price.total.amount} ₽`}</p>\r\n          <p className=\"card__description\">Стоимость для одного взрослого пассажира</p>\r\n        </div>\r\n      </header>\r\n\r\n      <Segment leg={props.flight.flight.legs[0]} />\r\n      <hr style={{ margin: 0, height: 1, background: '#0087c9' }} />\r\n      <Segment leg={props.flight.flight.legs[1]} />\r\n\r\n      <button type=\"submit\" className=\"card__submit-button\">Выбрать</button>\r\n    </article>\r\n  )\r\n}\r\n\r\nexport default memo(Card)\r\n","import { memo } from \"react\";\r\nimport Card from \"./Card\";\r\n\r\nfunction Main(props) {\r\n  return (\r\n    <>\r\n      {props.flights.length\r\n        ? (\r\n          <section className=\"main\">\r\n            {props.flights.map((flight, ind) => <Card key={ind} flight={flight} />)}\r\n            {props.children}\r\n          </section>\r\n        )\r\n        : <div style={{ flex: 1, padding: 50, textAlign: 'center', fontSize: '20px' }}>\r\n            Нет данных по заданным параметрам\r\n          </div>\r\n      }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default memo(Main);\r\n","import { useEffect, useState } from \"react\";\nimport { getFlights } from \"../api/api\";\nimport { selectedFilters, filteredFlights, initialFilters, visibleStep } from \"../utils/utils\";\nimport FilterPanel from \"./FilterPanel\";\nimport Main from \"./Main\";\n\nfunction App() {\n  const [visibleFlights, setVisibleFlights] = useState(new Array(visibleStep));\n  const [visibleCount, setVisibleCount] = useState(visibleStep);\n  const [filters, setFilters] = useState({});\n  const [sort, setSort] = useState('up');\n\n  useEffect(() => {\n    getFlights()\n      .then(flights => {\n        setVisibleFlights(\n          flights.sort((a, b) => a.flight.price.total.amount - b.flight.price.total.amount).slice(0, visibleCount)\n        )\n\n        flights.reduce((res, curr) => {\n          res.minPrice = Math.min(res.minPrice, curr.flight.price.total.amount);\n          res.maxPrice = Math.max(res.maxPrice, curr.flight.price.total.amount);\n\n          res.transfer[curr.flight.legs[0].segments.length - 1] = false;\n\n          res.vendors[curr.flight.carrier.uid] = {\n            isSelected: false,\n            caption: curr.flight.carrier.caption,\n            minPrice: Math.min(\n              (res.vendors[curr.flight.carrier.uid] ? res.vendors[curr.flight.carrier.uid].minPrice : 1e6),\n              curr.flight.price.total.amount\n            ),\n            maxPrice: Math.max(\n              (res.vendors[curr.flight.carrier.uid] ? res.vendors[curr.flight.carrier.uid].maxPrice : 0),\n              curr.flight.price.total.amount\n            )\n          };\n          return res\n        }, initialFilters)\n\n        setFilters(initialFilters);\n      })\n      .catch(err => alert(err))\n  }, [])\n\n  useEffect(() => {\n    if (Object.keys(filters).length) {\n      getFlights()\n        .then(flights => {\n          switch (sort) {\n            case 'up':\n              setVisibleFlights(filteredFlights(flights, selectedFilters(filters))\n                .sort((a, b) => a.flight.price.total.amount - b.flight.price.total.amount)\n                .slice(0, visibleCount))\n              break;\n            case 'down':\n              setVisibleFlights(filteredFlights(flights, selectedFilters(filters))\n                .sort((a, b) => b.flight.price.total.amount - a.flight.price.total.amount)\n                .slice(0, visibleCount))\n              break;\n            // case 'duration':\n            //   break;\n          }\n        })\n        .catch(err => alert(err))\n    }\n  }, [filters, visibleCount, sort])\n\n  function handleTransferChange({ target }) {\n    setFilters(prevState => (\n      {\n        ...prevState,\n        transfer: {\n          ...prevState.transfer,\n          [target.value]: !prevState.transfer[target.value]\n        }\n      }\n    ))\n  }\n\n  function handleVendorChange({ target }) {\n    setFilters(prevState => (\n      {\n        ...prevState,\n        vendors: {\n          ...prevState.vendors,\n          [target.value]: {\n            ...prevState.vendors[target.value],\n            isSelected: !prevState.vendors[target.value].isSelected\n          }\n        }\n      }\n    ))\n  }\n\n  const handlePrice = event => setFilters(prevState => ({ ...prevState, [event.target.name]: +event.target.value }))\n  const handleSort = event => setSort(event.target.id)\n\n  return (\n    <div className=\"page\">\n      <FilterPanel\n        filters={filters}\n        handleTransferChange={handleTransferChange}\n        handleVendorChange={handleVendorChange}\n        handlePrice={handlePrice}\n        handleSort={handleSort}\n        sort={sort}\n      />\n      <Main flights={visibleFlights}>\n        <button\n          type=\"button\"\n          className=\"main__button\"\n          onClick={() => setVisibleCount(prevState => prevState + visibleStep)}\n        >\n          Показать еще\n        </button>\n      </Main>\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './index.css';\n\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}